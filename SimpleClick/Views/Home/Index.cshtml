@model ContadorCliques.Models.ContadorViewModel

@{
    ViewData["Title"] = "Contador de Cliques";
}

<div class="text-center">
    <h1 class="display-4">Contador de Cliques com Banco de Dados</h1>
    <p class="lead">Clique no botão abaixo para incrementar o contador</p>

    <div class="card mt-4 mx-auto" style="max-width: 600px;">
        <div class="card-body">
            <h2 class="card-title">Total de Cliques</h2>
            <div class="display-1 text-primary my-4">
                @Model.Contador.Cliques
            </div>

            <p class="text-muted">
                <small>
                    Última atualização: @Model.Contador.UltimaAtualizacao.ToString("dd/MM/yyyy HH:mm:ss")
                </small>
            </p>

            <div class="d-flex gap-2 justify-content-center flex-wrap">
                <!-- Botão para incrementar o contador -->
                <form asp-controller="Home" asp-action="Contar" method="post" class="d-inline">
                    <button type="submit" class="btn btn-primary btn-lg">
                        ➕ Clique para Contar
                    </button>
                </form>

                <!-- Botão para resetar o contador -->
                <form asp-controller="Home" asp-action="Resetar" method="post" class="d-inline" 
                      onsubmit="return confirm('Tem certeza que deseja resetar o contador? Todo o histórico será apagado!');">
                    <button type="submit" class="btn btn-danger btn-lg">
                        🔄 Resetar Contador
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Histórico de Cliques (últimos 10) -->
    <div class="card mt-4 mx-auto" style="max-width: 800px;">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0">📊 Histórico de Cliques (Últimos 10)</h4>
        </div>
        <div class="card-body">
            @if (Model.Historico != null && Model.Historico.Any())
            {
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Número do Click</th>
                                <th scope="col">Data e Hora</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Historico)
                            {
                                <tr>
                                    <td>@item.Id</td>
                                    <td><span class="badge bg-primary">Click #@item.NumeroClick</span></td>
                                    <td>@item.DataHoraClick.ToString("dd/MM/yyyy HH:mm:ss")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                <div class="mt-3">
                    <a asp-controller="Home" asp-action="HistoricoCompleto" class="btn btn-outline-info">
                        📋 Ver Histórico Completo
                    </a>
                </div>
            }
            else
            {
                <div class="alert alert-warning" role="alert">
                    <strong>ℹ️ Nenhum clique registrado ainda.</strong><br />
                    Clique no botão acima para começar!
                </div>
            }
        </div>
    </div>

    <!-- Informações sobre o sistema -->
    <div class="alert alert-info mt-4 mx-auto" style="max-width: 800px;">
        <strong>✨ Recursos Implementados:</strong>
        <ul class="text-start mb-0">
            <li><strong>Persistência:</strong> Os dados são salvos em banco de dados SQLite</li>
            <li><strong>Histórico:</strong> Cada clique é registrado com data e hora exata</li>
            <li><strong>Reset:</strong> Possibilidade de resetar o contador e limpar o histórico</li>
            <li><strong>Tempo Real:</strong> Atualização imediata após cada ação</li>
        </ul>
    </div>
</div>